# Git Insight Development Notes

### 1 Setup

- `npx create-next-app@latest` use pnpm
- `cd git-insight`
- `npm run dev`
- Optional: If you face any error during npm run dev ex: with code `EACCES` then run `sudo chmod -R 777 .`

### 2 Add cursorrules

### 3 Install all dependencies

- shadcn/ui, lucide, zod

```prompt.txt
let's install shadcnui
```

### 3 Add button on home page to direct to dashboard and add dashboard page starter code

prompt used:

```prompt.txt
Clean up the home page @page.tsx. And add just one button at center that redirects the user to the /dashboards route. The /dashboards page will serve as a dedicated dashboard for managing API keys. Implement a user interface on the dashboard page to support full CRUD operations (Create, Read, Update, Delete) for API keys. Ensure the design is user-friendly and follows standard UI/UX practices.
```

```prompt.txt
for @ApiKeyDashboard.tsx change interface to types
```

- Fix errors if composer fails to generate code properly

ex:

```prompt.txt
let's update @ApiKeyForm.tsx @ApiKeyList.tsx and @ApiKeyDashboard.tsx to use shadcnui components rather than native input, btn etc
```

```prompt.txt
in @ApiKeyForm.tsx we should not have an input for api key. the key should be auto generated. we only need the name for the key
```

### 4 Improve UI to match the design screenshot

- take a screenshot of the design and ask the composer to make our UI look like this. You can also provide reference code from v0 or if you have figma you can use figma to html converter plugin to share the starting code.

```prompt.txt
I like this design. Make our UI look like this. you can update
@page.tsx , @ApiKeyForm.tsx, @ApiKeyList.tsx, @ApiKeyDashboard.tsx etc

feel free to create new components if necessary
```

### 5 Improve API Key Section to match the design screenshot

- As global screenshot of whole page might not be always correct
- so next step will be to go step by step and fix the individual components

```prompt.txt
The @ApiKeySection.tsx does not match with design let's improve that and make sure it matches with the design shared
```

```prompt.txt
currently ui is not fully functional. in add api key dialog if user adds a new key it should show on the table
```

```prompt.txt
also by default can we have two keys that are displayed in table on page load
```

```prompt.txt
on clicking edit, the edit modal should launch  with the values pre filled as shown in design
```

### 6 Integrate supabase and CRUD

- create a supabase account
- create a new project

- create .env.local file

```prompt.txt
@ApiKeySection.tsx I want to connect the CRUD APIs ehre to a supabase database
```

- response:

```SQL
create table api_keys (
  id uuid primary key default uuid_generate_v4(),
  user_id uuid references auth.users(id) not null,
  name text not null,
  key text not null,
  usage integer default 0,
  limit text,
  limit_enabled boolean default false,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);
```

- api key from: https://supabase.com/dashboard/project/pypwscdgfkrguzfkeusa/settings/api

- if you don't want auth in the beginning you can disable RLS in supabase and CRUD will work

- fix copy to clipboard

```prompt.txt
copy key feature does not seem to be working @ApiKeySection.tsx
```

- delete notification background should be red

```prompt.txt
delete notification background should be red
```

### 7 Sidebar

```prompt.txt
help me create a sidebar component that will be used in the dashboard page. As shown in the screenshot
```

```prompt.txt
Make sure the sidebar is hideable. Add a button to toggle the sidebar
```

### 8 Review and refactor

- It's a good practice to add unit and e2e tests to catch any breaking changes during refactor

```prompt.txt
I want to refactor my code.
The file @ApiKeySection.tsx is chunky. It has a lot of logic and components in it and is 300+ lines. Although I want my components to be small and focused and less than 300 lines. Currently the file has the CRUD API fetching and the API Key related components. I want to split this file into smaller files so the code is more readable and maintainable.
```

- During refactor composer might not use correct extensions ex: .tsx, .ts etc. So make sure to check the file extension and use correct one. Also, you might want to add the hooks folder in tailwind.config.ts to compile the styles
